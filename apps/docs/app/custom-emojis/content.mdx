import { BookOpen } from "lucide-react";
import { Alert, AlertDescription } from "@/components/ui/alert";

# Custom Emojis

Welcome to the **Custom Emojis**!  
This page will walk you through the basic usage of custom emoji.

<Alert variant="default" className="flex gap-2 items-start ">
  <span className="flex-shrink-0 leading-none mt-1.5">
    <BookOpen className="size-[1em] align-middle" />
  </span>
  <AlertDescription className="[&>*]:m-0">
    If you haven’t installed anything yet, please follow the steps in the [Usage
    Guide](/usage) before proceeding.
  </AlertDescription>
</Alert>

---

<H2
  iconUrl="https://ofqhpepsytodemxfrhrc.supabase.co/storage/v1/object/public/tiptap-extension-twemoji-assets/okabe.jpg"
  iconAlt="okabe"
  iconClassName="rounded"
>
  Using Predefined Custom Emojis
</H2>

```tsx
// components/Editor.tsx
import * as React from "react";
import { useEditor } from "@tiptap/react";
import { StarterKit } from "@tiptap/starter-kit";
import {
  TwemojiExtension,
  CustomEmoji,
} from "@raihancodes/tiptap-extension-twemoji-react";

export default function Editor() {
  const editor = useEditor({ extensions: [StarterKit, TwemojiExtension] });

  const customEmojis: CustomEmoji[] = [
    {
      id: "8177849e-c2c9-424a-a914-ff128ce439c5",
      created_at: "2025-08-09T00:26:09.143473+00:00",
      label: "github-icon",
      url: "...",
    },
    {
      id: "cecf7043-80da-4e3f-b167-6a85de0e464a",
      created_at: "2025-08-09T01:23:15.144872+00:00",
      label: "npm-icon",
      url: "...",
    },
  ];

  React.useEffect(() => {
    if (editor) {
      editor.commands.updateCustomEmojis(customEmojis);
    }
  }, [editor]);

  return <EditorContent editor={editor} />;
}
```

---

<H2
  iconUrl="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f5c4.svg"
  iconAlt="🗄️"
  iconClassName="rounded"
>
  Using Custom Emojis from Database
</H2>

Example: Fetching custom emojis from your database

```tsx
// page.tsx
import { CustomEmoji } from "@raihancodes/tiptap-extension-twemoji-react";

export default async function Page() {
  const { data, error } = await supabase.from("emojis").select("*");

  if (error) {
    console.error("Error fetching emojis:", error);
  }

  const customEmojis = (data ?? []) as CustomEmoji[];

  return <Editor customEmojis={customEmojis} />;
}
```

Handling Emoji Uploads and Applying Fetched Emojis

```tsx
"use client";

// components/Editor.tsx

import * as React from "react";
import { useEditor } from "@tiptap/react";
import { StarterKit } from "@tiptap/starter-kit";
import {
  EmojiUploadProps,
  TwemojiExtension,
  CustomEmoji,
} from "@raihancodes/tiptap-extension-twemoji-react";

export default function Editor({
  customEmojis,
}: {
  customEmojis: CustomEmoji[];
}) {
  const handleEmojiUpload: EmojiUploadProps["upload"] = async ({
    emojiName,
    files,
    onSuccess,
    onError,
    callback, // dismiss func for custom-emoji popover
  }) => {
    // your code
  };

  const handleEmojiOnError: EmojiUploadProps["onError"] = (errorMessage) => {
    // your code
  };

  const handleEmojiOnSuccess: EmojiUploadProps["onSuccess"] = (
    successMessage,
    callback
  ) => {
    // your code
  };

  const editor = useEditor({
    extensions: [
      StarterKit,
      TwemojiExtension.configure({
        customEmojiOptions: {
          upload: handleEmojiUpload,
          onSuccess: handleEmojiOnSuccess,
          onError: handleEmojiOnError,
        },
      }),
    ],
  });

  // Applying Fetched Emojis
  React.useEffect(() => {
    if (editor) {
      editor.commands.updateCustomEmojis(customEmojis);
    }
  }, [editor, customEmojis]);

  return <EditorContent editor={editor} />;
}
```

### Choose the approach that best fits your needs

---

<H2
  iconUrl="https://cdn.jsdelivr.net/gh/primer/octicons@16.1.1/icons/mark-github-16.svg"
  iconAlt="github"
  iconClassName="bg-white p-0.5 rounded"
>
  Quick Demo
</H2>

For more details, check the [example repo on GitHub](https://github.com/raihan-ramadhan/tiptap-extension-twemoji/tree/master/apps/example)

---

<H2
  iconUrl="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f680.svg"
  iconAlt="🚀"
>
  What’s Next?
</H2>

- 👉 Check out the [Deep Dive](/deep-dive) section to learn how to customize the extension—header, navigation, cell size, custom emojis, etc.
